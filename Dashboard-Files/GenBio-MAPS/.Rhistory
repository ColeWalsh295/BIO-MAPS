return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q1dd_[0-9]*$)', names(.))) %>%
select(-Q1d_10)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q1d_[0-9]*$)', names(.))) %>%
select(-Q1d_10)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q1d_[0-9]*$)', names(.))) %>%
select(-Q1d_10)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q1e_[0-9]*$)', names(.))) %>%
select(-Q1e_12)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q1e_[0-9]*$)', names(.))) %>%
select(-Q1e_12)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q1e_[0-9]*$)', names(.))) %>%
select(-Q2b_38)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2b_[0-9]*$)', names(.))) %>%
select(-Q2b_38)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2b_[0-9]*$)', names(.))) %>%
select(-Q2b_38)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2d_[0-9]*$)', names(.))) %>%
select(-Q2d_11)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2d_[0-9]*$)', names(.))) %>%
select(-Q2d_11)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
df.CW
df.NH
CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q3b_[0-9]*$)', names(.))) %>%
select(-Q3b_10)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q3b_[0-9]*$)', names(.))) %>%
select(-Q3b_10)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q3d_[0-9]*$)', names(.))) %>%
select(-Q3d_29)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q3e_[0-9]*$)', names(.))) %>%
select(-Q3e_8)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q3c_[0-9]*$)', names(.))) %>%
select(-Q3c_8)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q3c_[0-9]*$)', names(.))) %>%
select(-Q3c_8)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q4b_[0-9]*$)', names(.))) %>%
select(-Q4b_11)
library(tidyverse)
library(xlsx)
library(mc2d)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q4b_[0-9]*$)', names(.))) %>%
select(-Q4b_11)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
#CW.norm <- t(apply(df.CW, 1, function (x) x/sum(x)))
#NH.norm <- t(apply(df.NH, 1, function (x) x/sum(x)))
CW.norm <- df.CW
NH.norm <- df.NH
CW.norm[is.na(CW.norm)] <- 0
NH.norm[is.na(NH.norm)] <- 0
P.obs = sum(mc2d::pmin(CW.norm, NH.norm))/nrow(CW.norm)
P.obs
Get.Prob.Distributions <- function(df){
df.res = data.frame()
for(i in 1:ncol(df)){
df.temp = data.frame(t(table(df[,i])))
df.temp$Var1 = colnames(df)[i]
df.res = rbind(df.res, df.temp)
}
names(df.res) = c("Variable","Levels","Freq")
df.res$Freq <- df.res$Freq/nrow(df)
return(df.res)
}
CW.freq <- Get.Prob.Distributions(CW.norm)
NH.freq <- Get.Prob.Distributions(NH.norm)
df.freq <- merge(x = CW.freq, y = NH.freq, by = 'Variable', all = TRUE)
df.freq$Levels.x <- as.numeric(levels(df.freq$Levels.x))[df.freq$Levels.x]
df.freq$Levels.y <- as.numeric(levels(df.freq$Levels.y))[df.freq$Levels.y]
P.exp <- df.freq %>%
mutate(Exp = Freq.x * Freq.y * pmin(Levels.x, Levels.y)) %>%
summarize(sum(Exp)) %>%
pull()
(P.obs - P.exp)/(1 - P.exp)
source('FuzzyKappa.R')
Fuzzy.Kappa(df.CW, df.NH)
library(tidyverse)
library(xlsx)
library(mc2d)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
source('FuzzyKappa.R')
Fuzzy.Kappa(df.CW, df.NH)
Fuzzy.Kappa(df.CW, df.NH)
df.CW
library(tidyverse)
library(xlsx)
library(mc2d)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
source('FuzzyKappa.R')
Fuzzy.Kappa(df.CW, df.NH)
library(tidyverse)
library(xlsx)
library(mc2d)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
source('FuzzyKappa.R')
Fuzzy.Kappa(df.CW, df.NH)
library(tidyverse)
library(xlsx)
library(mc2d)
OthersList <- c('Q1b_19', 'Q1d_10', 'Q1e_12', 'Q2b_38', 'Q2d_11', 'Q2e_11', 'Q3b_10', 'Q3d_29', 'Q3e_8', 'Q4b_11')
df.NH <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/NH/Fall2017_Cornell_University_1116_Smith_POST_new_FR_NH.xlsx', sheetName = 1)
df.NH <- df.NH[2:nrow(df.NH),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.CW <- read.xlsx('C:/Users/Cole/Documents/GRA_Fall2017/FR_Coding/Coded/CW/Fall2017_Cornell_University_1116_Smith_POST_new_FR_CW.xlsx', sheetName = 1)
df.CW <- df.CW[2:nrow(df.CW),] %>%
select(grep('(Q2e_[0-9]*$)', names(.))) %>%
select(-Q2e_11)
df.NH[!is.na(df.NH)] <- 1
df.CW[!is.na(df.CW)] <- 1
df.CW <- data.frame(sapply(df.CW, as.numeric))
df.NH <- data.frame(sapply(df.NH, as.numeric))
df.NH[is.na(df.NH)] <- 0
df.CW[is.na(df.CW)] <- 0
source('FuzzyKappa.R')
Fuzzy.Kappa(df.CW, df.NH)
library(shiny); runApp('C:/Users/Cole/Documents/GRA_Summer2019/BIOMAPS_Shiny/EcoEvo_Dashboard.R')
shiny::runApp('C:/Users/Cole/Documents/GitHub/PLIC-Tools/Dashboard-Files')
shiny::runApp('C:/Users/Cole/Documents/GitHub/BIO-MAPS-Tools/Dashboard-Files/GenBio-MAPS')
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
library(data.table)
df <- fread('C:/Users/Cole/Documents/GRA_Fall2019/BIO-MAPS_Shiny/GenBio-MAPS/GenBio-MAPS_MasterFile.csv')
df$Gen_Avail_Radio
df <- fread('C:/Users/Cole/Documents/GRA_Fall2019/BIO-MAPS_Shiny/GenBio-MAPS/GenBio-MAPS_MasterFile.csv')
df$Gen_Avail_Radio
df <- fread('C:/Users/Cole/Documents/GRA_Fall2019/BIO-MAPS_Shiny/GenBio-MAPS/GenBio-MAPS_MasterFile.csv')
df$Gen_Avail_Radio
class(df$Gen_Avail_Radio)
shiny::runApp()
shiny::runApp()
library(data.table)
df <- fread('C:/Users/Cole/Documents/GRA_Fall2019/BIO-MAPS_Shiny/GenBio-MAPS/GenBio-MAPS_MasterFile.csv')
if(df[,'Gen_Avail_Radio']) print('hello')
if(df[1,'Gen_Avail_Radio']) print('hello')
if(isTRUE(df[1,'Gen_Avail_Radio'])) print('hello')
shiny::runApp()
runApp()
runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
